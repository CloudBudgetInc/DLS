<aura:component controller="InstructorMyProfileController" implements="forceCommunity:availableForAllPageTypes" access="global">
    
    <ltng:require styles="{!$Resource.SLDS_2_1_3 + '/assets/styles/lightning-design-system-ltng.css'}"/>
    
    <aura:attribute name="profileInfo" type="InstructorMyProfileController.MyProfileWrapper" description="Holding the Contact Profile Information" access="PUBLIC"/>
    <aura:attribute name="contactRec" type="Map" access="PUBLIC" description="Holding Contact information copy"/>
    <aura:attribute name="viewMode" type="Boolean" default="true" access="PUBLIC" description="To switch between view and edit mode"/>
    <aura:attribute name="showSpinner" type="Boolean" default="false" access="PUBLIC"/>
    <aura:attribute name="languageTableColumns" type="List" description="Language Table attribute" access="PUBLIC"/>
    <aura:attribute name="skillTableColumns" type="List" description="Language Table attribute" access="PUBLIC"/>
    <aura:attribute name="workExpColumns" type="List" description="Work Experience Table attribute" access="PUBLIC"/>
    <aura:attribute name="educationTableColumns" type="List" description="Education Table attribute" access="PUBLIC"/>
    <aura:attribute name="tableConfig" type="Map" description="Data table configuration attribute" access="PUBLIC"/>
    <aura:attribute name="eduTableConfig" type="Map" description="Education and ExperiaData table configuration attribute" access="PUBLIC"/>
    <aura:attribute name="experienceTableConfig" type="Map" description="Data table configuration attribute" access="PUBLIC"/>
    <aura:attribute name="selectedRec" type="Map" description="selected record to edit in table"/>
    <aura:attribute name="body" type="string" description="force tag attributes and informations"/>
    <aura:attribute name="action" type="string" description="choosed action " />
    <aura:attribute name="displayDevice" type="String" default=""/> 
    <aura:attribute name="eduExpTabObjName" type="String" default=""/> 
    <aura:attribute name="newRecModal" type="boolean" description="New record Modal"/>
    <aura:attribute name="newRecord" type="Map" default="{'skill' : false , 'language' : false, 'education' : false, 'experience':false , 'choosen' :''}"/>
    <aura:attribute name="tabName" type="String" default="ContactInfo" description="tabName for ContactInfo and Edu Experience"/> 
    <aura:attribute name="skillRecord" type="Skill__c" default="{}"/> 
    <aura:attribute name="selectedObjLookup" type="Map" default="{fromLanguage:[],toLanguage:[]}"/>
    <aura:attribute name="isShowWrkExpEndDate" type="Boolean" default="false"/>
    <aura:attribute name="showUserEmailUpdationModal"  type="Boolean" default="false"/>
    
    <!-- Handlers -->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler name="dtActionClick" event="ldt:clickedDtAction" action="{!c.tabActionClicked}"/>
    
    <!-- Spinner Component -->
    <aura:if isTrue="{!v.showSpinner}">
        <lightning:spinner variant="brand" size="medium" alternativeText="Loading" class="slds-is-fixed"/>
    </aura:if>
    
    <br/><center><h5 class="card-title" style="font-size:2rem;">MY PROFILE</h5></center><br/>
    <div>   
        <center>
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="{!v.tabName == 'ContactInfo' ? 'nav-link active' : 'nav-link'}"   data-toggle="tab" role="tab" data-tab="ContactInfo" onclick="{!c.toggleTab}">Contact Information</a>
                    </li>
                    <li class="nav-item">
                        <a  class="{!v.tabName == 'EduExperience' ? 'nav-link active' : 'nav-link'}" data-toggle="tab"  role="tab" data-tab="EduExperience" onclick="{!c.toggleTab}">Education &amp; Experience</a>
                    </li>
                    <li class="nav-item">
                        <a  class="{!v.tabName == 'MyDLSActivity' ? 'nav-link active' : 'nav-link'}" data-toggle="tab"  role="tab" data-tab="MyDLSActivity" onclick="{!c.toggleTab}">My DLS Activity</a>
                    </li>
                </ul>
        </center>
    </div>
    <div class="tab-content" style="padding-top:1rem;">
        <aura:if isTrue="{!v.tabName == 'ContactInfo'}">
            <div class="card-deck">
                <div class="card">
                    <span class="card-body" style="{!v.displayDevice == 'Mobile' ? 'padding:0.50rem !important;' : ''}">
                        <div align="right">
                            <aura:if isTrue="{!v.viewMode}">
                                <lightning:button variant="brand" class="btn btn-primary" label="Edit" onclick="{!c.editContactInfo}"/> 
                                <aura:set attribute="else">
                                    <lightning:button variant="brand" class="btn btn-primary" label="Save" onclick="{!c.saveContact}"/>
                                    <lightning:button variant="brand" class="btn btn-secondary" label="Cancel" onclick="{!c.cancelEdit}"/>
                                </aura:set>
                            </aura:if>
                        </div>
                        <h5 class="card-title">NAME</h5>
                        <form>
                            <div class="{!v.displayDevice == 'Mobile' ? '' :'row'}">
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" required="true" label="First Name" aura:id="inputFields" value="{!v.profileInfo.contactRec.firstName}" disabled="{!v.viewMode}"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" label="Middle Name"  value="{!v.profileInfo.contactRec.middleName}" disabled="{!v.viewMode}"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" label="Last Name" required="true"  aura:id="inputFields" value="{!v.profileInfo.contactRec.lastName}" disabled="{!v.viewMode}"/>
                                </div>
                            </div>
                            <div  class="{!v.displayDevice == 'Mobile' ? '' :'row'}">
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:select label="Salutation" value="{!v.profileInfo.contactRec.salutation}" disabled="{!v.viewMode}">
                                        <option value="">--None--</option>
                                        <aura:iteration items="{!v.profileInfo.contactRec.salutationPickList}" var="i">
                                            <option value="{!i}" selected="{!(v.profileInfo.contactRec.salutation == i)}">{!i}</option>
                                        </aura:iteration>
                                    </lightning:select> 
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? '' :'form-group col'}"></div>
                                <div class="{!v.displayDevice == 'Mobile' ? '' :'form-group col'}"></div>
                            </div><br/>
                        </form>
                        <aura:if isTrue="{!v.displayDevice == 'Mobile'}">
                            <h5 class="card-title"><div>CONTACT</div>INFO</h5>
                            <aura:set attribute="else">
                                <h5 class="card-title">CONTACT INFO</h5>
                            </aura:set>
                        </aura:if>
                        <form>
                            <div  class="{!v.displayDevice == 'Mobile' ? '' :'row'}">
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text"  label="Email" required="true" aura:id="inputFields" value="{!v.profileInfo.contactRec.email}"  disabled="{!v.viewMode}" />
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" label="Mobile" required="true" aura:id="inputFields" value="{!v.profileInfo.contactRec.mobilePhone}"  disabled="{!v.viewMode}"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}"></div>            
                            </div>
                            <div  class="{!v.displayDevice == 'Mobile' ? '' :'row'}">
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" label="Home Phone"  value="{!v.profileInfo.contactRec.homePhone}" disabled="{!v.viewMode}"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:select label="Preferred Phone" value="{!v.profileInfo.contactRec.preferredPhone}" disabled="{!v.viewMode}">
                                        <option value="">--None--</option>
                                        <aura:iteration items="{!v.profileInfo.contactRec.preferredPhonePickList}" var="prepPhone">
                                            <option value="{!prepPhone}" selected="{!(v.profileInfo.contactRec.preferredPhone == prepPhone)}">{!prepPhone}</option>
                                        </aura:iteration>
                                    </lightning:select>                          
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}"></div>            
                            </div>
                            <div  class="{!v.displayDevice == 'Mobile' ? '' :'row'}">
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text"  label="Zoom User Name" value="{!v.profileInfo.contactRec.zoomUserName}"  disabled="true" />
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" label="Zoom License" value="{!v.profileInfo.contactRec.zoomLicense}"  disabled="true"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}"></div>            
                            </div>
                            <br/>
                        </form>
                        <h5 class="card-title">ADDRESS</h5>
                        <form>
                            <div class="{!v.displayDevice == 'Mobile' ? '' :'row'}">
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" label="Mailing Street" required="true" aura:id="inputFields" value="{!v.profileInfo.contactRec.mailingStreet}" disabled="{!v.viewMode}" />
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input  label="Mailing City" type="text" required="true" aura:id="inputFields"  value="{!v.profileInfo.contactRec.mailingCity}"  disabled="{!v.viewMode}"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? '' :'form-group col'}"></div>
                            </div>
                            <div  class="{!v.displayDevice == 'Mobile' ? '' :'row'}">
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input  type="text" label="Mailing State" required="true"  aura:id="inputFields" value="{!v.profileInfo.contactRec.mailingState}" disabled="{!v.viewMode}"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? 'inputClass' :'form-group col inputClass'}">
                                    <lightning:input type="text" label="Postal Code" required="true" aura:id="inputFields" value="{!v.profileInfo.contactRec.mailingPostalCode}" disabled="{!v.viewMode}"/>
                                </div>
                                <div class="{!v.displayDevice == 'Mobile' ? '' :'form-group col'}"></div>
                            </div>
                        </form>
                    </span>
                </div>
            </div>
        </aura:if>
        <aura:if isTrue="{!v.tabName == 'EduExperience'}">            
            <div class="card-deck">
                <div class="card">
                    <span class="card-body" style="{!v.displayDevice == 'Mobile' ? 'padding:0.25rem !important;' : ''}">
                        <h5 class="card-title">LANGUAGES</h5> 
                        <div align="right" style="margin-top:-3rem;">
                            <lightning:button label="Add" name="Add Known Language" class="btn btn-primary"  variant="brand" onclick="{!c.createNewRec}"/>
                        </div> <br/>
                        <!-- known Language Table -->
                        <aura:if isTrue="{!v.profileInfo.languageList.length > 0}">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped container-table responsive-card-table">
                                    <thead class="thead-light">
                                        <tr class="slds-line-height_reset">
                                            <aura:iteration items="{!v.languageTableColumns}" var="item">
                                                <aura:if isTrue="{!item.visible}">
                                                    <th  class="wrap" scope="col">{!item.label}</th>
                                                </aura:if>
                                            </aura:iteration>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.profileInfo.languageList}" var="row">
                                            <tr class="slds-hint-parent">
                                                <td data-label="Language Name">{!row.languageName}</td>
                                                <td data-label="Native Language"><lightning:input type="checkbox" label="" name="input3" disabled="true" checked="{!row.nativeLanguage}"/></td>
                                                <td data-label="Action"><span><i class="far fa-edit" data-name="{!row.id+'/Language'+'/editAction'}" onclick="{!c.tabActionClicked}"></i>&nbsp;
                                                    <i class="far fa-trash-alt" data-name="{!row.id+'/Language'+'/deleteAction'}" onclick="{!c.tabActionClicked}"></i></span></td>
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <aura:set attribute="else">
                                <center>No records to display</center>
                            </aura:set>
                        </aura:if>
                    </span>
                </div>
            </div><br/>
            <!-- Skill Table -->
            <div class="card-deck">
                <div class="card">
                    <span class="card-body" style="{!v.displayDevice == 'Mobile' ? 'padding:0.25rem !important;' : ''}">
                        <h5 class="card-title">SKILLS</h5>
                        <div align="right" style="margin-top:-3rem;">
                            <lightning:button label="Add" name="Add Skill" class="btn btn-primary"  variant="brand" onclick="{!c.createNewRec}"/>
                        </div><br/>
                        <aura:if isTrue="{!v.profileInfo.skillList.length > 0}">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped container-table responsive-card-table">
                                    <thead class="thead-light">
                                        <tr class="slds-line-height_reset">
                                            <aura:iteration items="{!v.skillTableColumns}" var="item">
                                                <aura:if isTrue="{!item.visible}">
                                                    <th  class="wrap" scope="col">{!item.label}</th>
                                                </aura:if>
                                            </aura:iteration>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.profileInfo.skillList}" var="row">
                                            <tr class="slds-hint-parent">
                                                <td data-label='Skill Name'>{!row.skillName}</td>
                                                <td data-label='Action'><span><i style="font-size: 2rem;" data-name="{!row.id+'/Skill'+'/editAction'}" onclick="{!c.tabActionClicked}"  class="far fa-edit"></i>&nbsp;
                                                    <i style="font-size: 2rem;" data-name="{!row.id+'/Skill'+'/deleteAction'}" onclick="{!c.tabActionClicked}" class="far fa-trash-alt"></i></span></td>
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <aura:set attribute="else">
                                <center>No records to display</center>
                            </aura:set>
                        </aura:if>
                    </span>
                </div>
            </div><br/>
            <!-- Work Experience Table -->
            <div class="card-deck">
                <div class="card">
                    <span class="card-body" style="{!v.displayDevice == 'Mobile' ? 'padding:0.25rem !important;' : ''}">
                        <h5 class="card-title">WORK EXPERIENCES</h5>
                        <div align="right" style="margin-top:-3rem;">
                            <lightning:button label="Add" name="Add Experience" class="btn btn-primary" variant="brand" onclick="{!c.createNewRec}"/>
                        </div><br/>
                        <aura:if isTrue="{!v.profileInfo.workExperianceList.length > 0}">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped container-table responsive-card-table slds-table_fixed-layout box">
                                    <thead class="thead-light">
                                        <tr class="slds-line-height_reset">
                                            <aura:iteration items="{!v.workExpColumns}" var="item">
                                                <aura:if isTrue="{!item.visible}">
                                                    <th class="wrap" scope="col">{!item.label}</th>    
                                                </aura:if>
                                            </aura:iteration>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.profileInfo.workExperianceList}" var="row">
                                            <tr class="slds-hint-parent">
                                                <td class="wrap" data-label="Company Name">{!row.nameOfCompany}</td>
                                                <td class="wrap" data-label="Role/Job title">{!row.roleTitle}</td>
                                                <td  class="wrap" data-label="Start Date">{!row.stardDateStr}</td>
                                                <td  class="wrap" data-label="End Date">{!row.endDateStr}</td>
                                                <td class="wrap" data-label="Service(S)">{!row.services}</td>
                                                <td class="wrap" data-label="City">{!row.city}</td>
                                                <td class="wrap" data-label="State">{!row.state}</td>
                                                <td class="wrap" data-label="Country">{!row.country}</td>
                                                <td data-label="Action"><span><i style="font-size: 2rem;" data-name="{!row.id+'/WorkExp'+'/editAction'}" onclick="{!c.tabActionClicked}"  class="far fa-edit"></i>&nbsp;
                                                    <i style="font-size: 2rem;" data-name="{!row.id+'/WorkExp'+'/deleteAction'}" onclick="{!c.tabActionClicked}" class="far fa-trash-alt"></i>
                                                    &nbsp;<i style="font-size: 2rem;" data-name="{!row.id+'/WorkExp'+'/viewMoreAction'}" onclick="{!c.tabActionClicked}" class="fas fa-ellipsis-h"></i></span></td>
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <aura:set attribute="else">
                                <center>No records to display</center>
                            </aura:set>
                        </aura:if>
                    </span>
                </div>
            </div><br/>
            <!-- Education Table -->
            <div class="card-deck">
                <div class="card">
                    <span class="card-body" style="{!v.displayDevice == 'Mobile' ? 'padding:0.25rem !important;' : ''}">
                        <h5 class="card-title">EDUCATION</h5>
                        <div align="right" style="margin-top:-3rem;">
                            <lightning:button label="Add" class="btn btn-primary" name="Add Education" variant="brand" onclick="{!c.createNewRec}"/>
                        </div><br/>
                        <aura:if isTrue="{!v.profileInfo.educationList.length > 0}">
                            <div class="table-responsive">
                                <table class="table table-bordered table-striped container-table responsive-card-table slds-table_fixed-layout box">
                                    <thead class="thead-light">
                                        <tr class="slds-line-height_reset">
                                            <aura:iteration items="{!v.educationTableColumns}" var="item">
                                                <aura:if isTrue="{!item.visible}">
                                                    <th  class="wrap"  scope="col">{!item.label}</th>    
                                                </aura:if>
                                            </aura:iteration>
                                            <th  scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.profileInfo.educationList}" var="row">
                                            <tr class="slds-hint-parent">
                                                <td class="wrap" data-label="College/School">{!row.collegeSchool}</td>
                                                <td class="wrap" data-label="College/School Type">{!row.collegeSchoolType}</td>
                                                <td class="wrap" data-label="Location">{!row.location}</td>
                                                <td class="wrap" data-label="Degree">{!row.degree}</td>
                                                <td class="wrap" data-label="Degree Level">{!row.degreeLevel}</td>
                                                <td class="wrap" data-label="Field Of Concentration">{!row.fieldOfConcentration}</td>
                                                <td class="wrap" data-label="Year Of Completion">{!row.yearOfCompletion}</td>
                                                <td data-label="Action"><span><i style="font-size: 2rem;" data-name="{!row.id+'/Education'+'/editAction'}" onclick="{!c.tabActionClicked}"  class="far fa-edit"></i>&nbsp;
                                                    <i style="font-size: 2rem;" data-name="{!row.id+'/Education'+'/deleteAction'}" onclick="{!c.tabActionClicked}" class="far fa-trash-alt"></i></span></td>
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <aura:set attribute="else">
                                <center>No records to display</center>
                            </aura:set>
                        </aura:if>
                    </span>
                </div>
            </div>
        </aura:if>
        <aura:if isTrue="{!v.tabName == 'MyDLSActivity'}">
            <div class="card-deck">
                <div class="card">
                    <span class="card-body" style="{!v.displayDevice == 'Mobile' ? 'padding:0.25rem !important;' : ''}"  >
                        <h5 class="card-title">My DLS Activity</h5>                               
                        <lightning:layout multipleRows="true" class="slds-p-around_small">
                            <lightning:layoutItem size="{!v.displayDevice == 'Mobile' ? '12' : '4'}" >
                                <center><b><h1><ui:outputDateTime format="MM/DD/YYYY" value="{!v.profileInfo.contactRec.teachingInDlsSince}"/>&nbsp;</h1></b>
                                    <div><p class="label">Teaching at DLS Since</p></div></center>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="{!v.displayDevice == 'Mobile' ? '12' : '4'}" >
                                <center><b><h1>{!v.profileInfo.contactRec.classProjectsTaught}&nbsp;</h1></b>
                                    <p class="label"># of Classes (Projects) Taught</p></center>
                            </lightning:layoutItem> 
                            <lightning:layoutItem size="{!v.displayDevice == 'Mobile' ? '12' : '4'}" >
                                <center><b><h1>{!v.profileInfo.contactRec.noofStudentsTaught}&nbsp;</h1></b>
                                    <div><p class="label"># of Students Taught</p></div></center>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="{!v.displayDevice == 'Mobile' ? '12' : '4'}" >
                                <center><b><h1>{!v.profileInfo.contactRec.noOfClassHours}&nbsp;</h1></b>
                                    <div><p class="label"># of Class Hours</p></div></center>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="{!v.displayDevice == 'Mobile' ? '12' : '4'}" >
                                <center><b><h1>{!v.profileInfo.contactRec.noOfTestsPerformed}&nbsp;</h1></b>
                                    <div><p class="label"># of Tests Performed</p></div></center>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="{!v.displayDevice == 'Mobile' ? '12' : '4'}">
                                <center><b><h1>{!v.profileInfo.contactRec.noOfWorkshopsAttended}&nbsp;</h1></b>
                                    <p class="label"># of Workshops Attended</p></center>
                            </lightning:layoutItem>
                        </lightning:layout>
                    </span>
                </div>
            </div><br/>
            <div class="card-deck">
                <div class="card">
                    <span class="card-body">
                        <h5 class="card-title">Workshops Attended</h5> 
                        <c:InstructorProfileCmp_WorkshopAttended/>
                    </span>
                </div>
            </div>
        </aura:if>
    </div>
    
    <aura:if isTrue="{!v.newRecModal}"> 
        <div class="demo-only demo-only_viewport" aura:id="newRecModal" style="height:640px;width:70%;">
            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <header class="slds-modal__header">
                        <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate"> {!v.newRecord.choosen}</h2>
                    </header>
                    <div class="slds-modal__content slds-p-around_medium newInputCls" id="modal-content-id-1">
                        <aura:if isTrue="{!v.newRecord.skill}">
                            <lightning:recordEditForm onsubmit ="{!c.onSubmit}" aura:id="Add Skill" onsuccess="{!c.handleSuccess}" onerror="{!c.handleError}" objectApiName="Skill__c"> <lightning:messages />    
                                <lightning:layout multipleRows="true">
                                    <lightning:layoutItem size="6" padding="around-small">   
                                        <lightning:select label="Skill" value="{!v.skillRecord.Skill__c}" aura:id="reqInputs">
                                            <option value="">--None--</option>
                                            <aura:iteration items="{!v.profileInfo.skillObjectPickList}" var="skill">
                                                <option value="{!skill}">{!skill}</option>
                                            </aura:iteration>
                                        </lightning:select>           
                                    </lightning:layoutItem>
                                    <aura:if isTrue="{!or(v.skillRecord.Skill__c == 'Language Training',or(v.skillRecord.Skill__c == 'Curriculum Development',v.skillRecord.Skill__c == 'Language Testing'))}">
                                        <lightning:layoutItem size="6" padding="around-small">
                                            <c:LookupSearch aura:id="lang" selection="{!v.selectedObjLookup.fromLanguage}" onSearch="{!c.skillLangLookupSearch}" iconName="" objectName="Language__c" fieldName="Name" condition="" label="Language" placeholder="Search Language" isMultiEntry="false" />
                                            <!--span class="slds-form-element__label">Language</span>
                                            <lightning:inputField fieldName="From_Language_LU__c" variant="label-hidden" value="{!v.skillRecord.From_Language_LU__c}"/-->
                                        </lightning:layoutItem>
                                    </aura:if>
                                    <aura:if isTrue="{!or(v.skillRecord.Skill__c == 'Translation',or(v.skillRecord.Skill__c == 'Interpretation',v.skillRecord.Skill__c == 'Localization'))}">
                                        <lightning:layoutItem size="6" padding="around-small">
                                            <c:LookupSearch aura:id="fromLang" selection="{!v.selectedObjLookup.fromLanguage}" onSearch="{!c.skillFromLangLookupSearch}" iconName="" objectName="Language__c" fieldName="Name" condition="" label="From Language" placeholder="Search From Language" isMultiEntry="false" />
                                        </lightning:layoutItem>
                                        <lightning:layoutItem size="6" padding="around-small">
                                            <c:LookupSearch aura:id="toLang" selection="{!v.selectedObjLookup.toLanguage}" onSearch="{!c.skillToLangLookupSearch}" iconName="" objectName="Language__c" fieldName="Name" condition="" label="To Language" placeholder="Search To Language" isMultiEntry="false" />
                                        </lightning:layoutItem>
                                    </aura:if>
                                </lightning:layout>
                                <hr/>
                                <footer style="text-align: right;border-top: 1px solid rgba(0, 0, 0, 0);">
                                    <lightning:button  variant="brand" class="btn btn-primary" name="Submit" label="Save" onclick="{!c.onSubmit}"/>
                                    <lightning:button label="Cancel"  class="btn btn-secondary" variant="brand" onclick="{!c.closeModel}"/>
                                </footer>
                            </lightning:recordEditForm >
                        </aura:if>
                        <aura:if isTrue="{!v.newRecord.language}">
                            <lightning:recordEditForm onsubmit ="{!c.onSubmit}" onsuccess="{!c.handleSuccess}" onerror="{!c.handleError}" aura:id="Add Known Language" objectApiName="Known_Language__c"> 
                                <lightning:layout multipleRows="true">
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Language</span>
                                        <lightning:inputField fieldName="Language__c" aura:id="reqInputs" required="true"  variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Listening Proficiency</span>
                                        <lightning:inputField fieldName="Listening_Proficiency__c"  variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Native Language</span>
                                        <lightning:inputField fieldName="Native_Language__c"  variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Speaking Proficiency</span>
                                        <lightning:inputField fieldName="Speaking_Proficiency__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                </lightning:layout>
                                <hr/>
                                <footer style="text-align: right;border-top: 1px solid rgba(0, 0, 0, 0);">
                                    <lightning:button  variant="brand" class="btn btn-primary" type="Submit" name="Submit" label="Save" />
                                    <lightning:button label="Cancel" class="btn btn-secondary" variant="brand" onclick="{!c.closeModel}"/>
                                </footer>
                            </lightning:recordEditForm>       
                        </aura:if>
                        <aura:if isTrue="{!v.newRecord.education}">
                            <lightning:recordEditForm onsubmit ="{!c.onSubmit}" aura:id="Add Education" onsuccess="{!c.handleSuccess}" onerror="{!c.handleError}"  recordTypeId="{!v.profileInfo.educationRecTypeId}" objectApiName="Experience__c">
                                <lightning:layout multipleRows="true">
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">College/School Name</span>
                                        <lightning:inputField fieldName="College_School__c" aura:id="reqInputs" variant="label-hidden" required="true" />
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">College/School Type</span>
                                        <lightning:inputField fieldName="College_School_Type__c" aura:id="reqInputs" required="true" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">City</span>
                                        <lightning:inputField fieldName="City__c" variant="label-hidden" />
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Country (if not USA)</span>
                                        <lightning:inputField fieldName="Country__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">State</span>
                                        <lightning:inputField fieldName="State__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Degree</span>
                                        <lightning:inputField fieldName="Degree__c" aura:id="reqInputs" required="true" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Degree Level</span>
                                        <lightning:inputField fieldName="Degree_Level__c" aura:id="reqInputs" required="true" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Field of Concentration</span>
                                        <lightning:inputField fieldName="Field_of_Concentration__c" aura:id="reqInputs" required="true" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Year of Completion</span>
                                        <lightning:inputField fieldName="Year_of_Completion__c" aura:id="reqInputs" required="true" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                </lightning:layout>
                                <hr/>
                                <footer style="text-align: right;border-top: 1px solid rgba(0, 0, 0, 0);">
                                    <lightning:button  variant="brand" class="btn btn-primary" type="Submit" name="Submit" label="Save" />
                                    <lightning:button label="Cancel" class="btn btn-secondary" variant="brand" onclick="{!c.closeModel}"/>
                                </footer>
                            </lightning:recordEditForm >       
                        </aura:if>
                        <aura:if isTrue="{!v.newRecord.experience}">
                            <lightning:recordEditForm onsubmit ="{!c.onSubmit}" aura:id="Add Experience" onsuccess="{!c.handleSuccess}" onerror="{!c.handleError}" recordTypeId="{!v.profileInfo.expRecTypeId}" objectApiName="Experience__c">
                                <lightning:layout multipleRows="true">
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Role Title</span>
                                        <lightning:inputField class="inputBorder" aura:id="reqInputs"  required="true" fieldName="Role_Title__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Company Name</span>
                                        <lightning:inputField fieldName="Name_of_Company__c" aura:id="reqInputs" required="true" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Start Date</span>
                                        <lightning:inputField fieldName="Start_Date__c" aura:id="reqInputs" required="true" variant="label-hidden" class="dateCls"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">End Date</span>
                                        <aura:if isTrue="{!v.isShowWrkExpEndDate}">
                                            <lightning:inputField fieldName="End_Date__c" aura:id="reqInputs" required="true" variant="label-hidden" class="dateCls"/>
                                            <a style="text-decoration: underline !important;" onclick="{!c.showPresentText}">Present</a>
                                            <aura:set attribute="else">
                                                <lightning:input type="text" label="" class="presentCls" value ="Present" disabled="true" onclick="{!c.showWorkExpEndDate}"/>
                                            </aura:set>
                                        </aura:if>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Total Hours Performed</span>
                                        <lightning:inputField fieldName="Total_Hours_Performed__c"  variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Average Hrs Per Week</span>
                                        <lightning:inputField fieldName="Average_Hrs_Per_Week__c" class="expCls" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="12" padding="around-small">
                                        <span style="font-weight:bold;" class="slds-form-element__label">Service(s)</span>
                                        <lightning:inputField fieldName="Services__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">City</span>
                                        <lightning:inputField fieldName="City__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">State</span>
                                        <lightning:inputField fieldName="State__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Country (if not USA)</span>
                                        <lightning:inputField fieldName="Country__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Full-time / Part-time</span>
                                        <lightning:inputField fieldName="FT_PT__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="6" padding="around-small">
                                        <span class="slds-form-element__label">Description</span>
                                        <lightning:inputField fieldName="Description__c" variant="label-hidden"/>
                                    </lightning:layoutItem>
                                </lightning:layout>
                                <hr/>
                                <footer style="text-align: right;border-top: 1px solid rgba(0, 0, 0, 0);">
                                    <lightning:button  variant="brand" class="btn btn-primary" type="Submit" name="Submit" label="Save" />
                                    <lightning:button label="Cancel" class="btn btn-secondary"  variant="brand" onclick="{!c.closeModel}"/>
                                </footer>
                            </lightning:recordEditForm >
                        </aura:if>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </div>  
    </aura:if>
    
    
    <!-- server side action service component -->
    <c:ApexService aura:id="server"/>
    
    <!-- Record Edit Modal -->
    <aura:if isTrue="{!v.action == 'editAction'}">
        <c:sldsModal aura:id="EditModal" >
            <aura:set attribute="header">
                Edit {!v.eduExpTabObjName} 
            </aura:set>
            <aura:set attribute="content">
                <aura:if isTrue="{!v.eduExpTabObjName == 'Work Experience'}">
                    <lightning:recordEditForm onsubmit="{!c.save}" aura:id="Edit Experience" onsuccess="{!c.handleSuccess}" onerror="{!c.handleError}" recordId="{!v.selectedRec.id}" objectApiName="Experience__c">
                        <lightning:layout multipleRows="true">
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Role Title</span>
                                <lightning:inputField class="inputBorder" aura:id="reqInputs"  required="true" fieldName="Role_Title__c" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Company Name</span>
                                <lightning:inputField fieldName="Name_of_Company__c" aura:id="reqInputs" required="true" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Start Date</span>
                                <lightning:inputField fieldName="Start_Date__c" aura:id="reqInputs" required="true" variant="label-hidden" class="dateCls"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">End Date</span>
                                <aura:if isTrue="{!v.isShowWrkExpEndDate}">
                                    <lightning:inputField fieldName="End_Date__c" aura:id="reqInputs" required="true" variant="label-hidden" class="dateCls"/>
                                    <a style="text-decoration: underline !important;" onclick="{!c.showPresentText}">Present</a>
                                    <aura:set attribute="else">
                                        <lightning:input type="text" label="" class="presentCls" value ="Present" disabled="true" onclick="{!c.showWorkExpEndDate}"/>
                                    </aura:set>
                                </aura:if>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Total Hours Performed</span>
                                <lightning:inputField fieldName="Total_Hours_Performed__c"  variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Average Hrs Per Week</span>
                                <lightning:inputField fieldName="Average_Hrs_Per_Week__c" class="expCls" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="12" padding="around-small">
                                <span style="font-weight:bold;" class="slds-form-element__label">Service(s)</span>
                                <lightning:inputField fieldName="Services__c" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">City</span>
                                <lightning:inputField fieldName="City__c" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">State</span>
                                <lightning:inputField fieldName="State__c" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Country (if not USA)</span>
                                <lightning:inputField fieldName="Country__c" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Full-time / Part-time</span>
                                <lightning:inputField fieldName="FT_PT__c" variant="label-hidden"/>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <span class="slds-form-element__label">Description</span>
                                <lightning:inputField fieldName="Description__c" variant="label-hidden"/>
                            </lightning:layoutItem>
                        </lightning:layout>
                        <hr/>
                        <footer style="text-align: right;border-top: 1px solid rgba(0, 0, 0, 0);">
                            <lightning:button  variant="brand" class="btn btn-primary" type="Submit" name="Submit" label="Save" />
                            <lightning:button label="Cancel" class="btn btn-secondary"  variant="brand" onclick="{!c.closeModel}"/>
                        </footer>
                    </lightning:recordEditForm >
                </aura:if>
                <aura:if isTrue="{!v.eduExpTabObjName == 'Skill'}">
                    <lightning:layout multipleRows="true">
                        <lightning:layoutItem size="6" padding="around-small">  
                            <lightning:select label="Skill" value="{!v.skillRecord.Skill__c}" aura:id="reqInputs">
                                <option value="">--None--</option>
                                <aura:iteration items="{!v.profileInfo.skillObjectPickList}" var="skill">
                                    <option value="{!skill}">{!skill}</option>
                                </aura:iteration>
                            </lightning:select>           
                        </lightning:layoutItem>
                        <aura:if isTrue="{!or(v.skillRecord.Skill__c == 'Language Training',or(v.skillRecord.Skill__c == 'Curriculum Development',v.skillRecord.Skill__c == 'Language Testing'))}">
                            <lightning:layoutItem size="6" padding="around-small">
                                <c:LookupSearch aura:id="lang" selection="{!v.selectedObjLookup.fromLanguage}" onSearch="{!c.skillLangLookupSearch}" iconName="" objectName="Language__c" fieldName="Name" condition="" label="Language" placeholder="Search Language" isMultiEntry="false" />
                            </lightning:layoutItem>
                        </aura:if>
                        <aura:if isTrue="{!or(v.skillRecord.Skill__c == 'Translation',or(v.skillRecord.Skill__c == 'Interpretation',v.skillRecord.Skill__c == 'Localization'))}">
                            <lightning:layoutItem size="6" padding="around-small">
                                <c:LookupSearch aura:id="fromLang" selection="{!v.selectedObjLookup.fromLanguage}" onSearch="{!c.skillFromLangLookupSearch}" iconName="" objectName="Language__c" fieldName="Name" condition="" label="From Language" placeholder="Search From Language" isMultiEntry="false" />
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6" padding="around-small">
                                <c:LookupSearch aura:id="toLang" selection="{!v.selectedObjLookup.toLanguage}" onSearch="{!c.skillToLangLookupSearch}" iconName="" objectName="Language__c" fieldName="Name" condition="" label="To Language" placeholder="Search To Language" isMultiEntry="false" />
                            </lightning:layoutItem>
                        </aura:if>
                    </lightning:layout>
                </aura:if>
                <aura:if isTrue="{!and(v.eduExpTabObjName != 'Skill',v.eduExpTabObjName != 'Work Experience')}">
                    <div aura:id="editForm">
                        {!v.body}
                    </div>
                </aura:if>
            </aura:set>
            <aura:set attribute="footer">
                <div class="{!v.eduExpTabObjName == 'Work Experience' ? 'hideFooterCls' : ''}">
                    <lightning:button label="Save" class="btn btn-primary" variant="brand" onclick="{!c.save}"/>
                    <lightning:button label="Cancel" class="btn btn-secondary"  variant="brand" onclick="{!c.closeModel}"/>
                </div>
            </aura:set>
        </c:sldsModal>
    </aura:if>
    
    <!-- Experience Fields View More action -->
    
    <aura:if isTrue="{!v.action == 'viewMoreAction'}">
        <c:sldsModal aura:id="ViewModal" >
            <aura:set attribute="header">
                {!v.selectedRec.nameOfCompany} {!v.selectedRec.nameOfCompany != null ? '-' : ''}  {!v.selectedRec.roleTitle}
            </aura:set>
            <aura:set attribute="content">
                <div>
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped container-table responsive-card-table slds-table_fixed-layout box">
                            <thead class="thead-light">
                                <tr class="slds-line-height_reset">
                                    <th  class="wrap"  scope="col">Total # of Hrs</th>   
                                    <th  class="wrap"  scope="col">Avg Hrs per week</th>    
                                    <th  class="wrap"  scope="col">Full-time / Part-time</th>   
                                    <th  class="wrap"  scope="col">Description</th>   
                                </tr>
                            </thead>
                            <tbody>
                                <aura:if isTrue="{!not(empty(or(v.selectedRec.totalHoursPerformed,or(v.selectedRec.averageHrsPerWeek,or(v.selectedRec.ftPt,v.selectedRec.description)))))}">
                                    <tr class="slds-hint-parent">
                                        <td class="wrap" data-label="Total # of Hrs"> {!v.selectedRec.totalHoursPerformed}</td>
                                        <td class="wrap" data-label="College/School Type">{!v.selectedRec.averageHrsPerWeek}</td>
                                        <td class="wrap" data-label="Location">{!v.selectedRec.ftPt}</td>
                                        <td class="wrap" data-label="Degree">{!v.selectedRec.description}</td>
                                    </tr>
                                    <aura:set attribute="else">
                                        <tr>
                                            <td colspan="4" class="slds-text-align_center">No record to display</td>
                                        </tr>
                                    </aura:set>
                                </aura:if>
                            </tbody>
                        </table>
                    </div>
                </div>
            </aura:set>
            <aura:set attribute="footer">
                <lightning:button label="Close" class="btn btn-primary"   variant="brand" onclick="{!c.closeModel}"/>
            </aura:set>
        </c:sldsModal>
    </aura:if>
    
    <aura:if isTrue="{!v.action == 'deleteModal'}">
        <c:sldsModal aura:id="delete" >
            <aura:set attribute="header">
                Confirmation
            </aura:set>
            <aura:set attribute="content">
                <div aura:id="editForm">
                    <center>Are you sure you want to delete this {!v.eduExpTabObjName}</center>
                </div>
            </aura:set>
            <aura:set attribute="footer">
                <lightning:button label="Delete" class="btn btn-primary" variant="brand" onclick="{!c.deleteRecord}"/>
                <lightning:button label="Cancel" class="btn btn-secondary" variant="brand" onclick="{!c.closeModel}"/>
            </aura:set>
        </c:sldsModal>
    </aura:if>
    
    <!-- To update user record if contact email is changed-->
    <aura:if isTrue="{!v.showUserEmailUpdationModal}">
        <c:sldsModal modelWidth="45%" aura:id="userUpdate"  displayCloseImage="false" header="Message"> 
            <aura:set attribute="content">
                <p style=" font-size: 1rem;">This will update your user email &amp; user name. Please use the new email for future login purpose.</p> 
            </aura:set>
            <aura:set attribute="footer">
                <div>
                    <lightning:button class="btn btn-primary" label="OK" onclick="{!c.updateContactAndUser}"/>
                </div>
            </aura:set>
        </c:sldsModal>
    </aura:if>
    
</aura:component>